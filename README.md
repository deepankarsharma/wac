# wac - WebAssembly in C

A Minimal WebAssembly interpreter written in C. Supports the
WebAssembly MVP (minimum viable product) version of the WebAssembly
specification.

This fork of the great works at **kanaka/wac** focuses on making the
WASM Interpreter work on embedded devices compatible with 
Espressif ESP32 and their ESP-IF development environment.

Please read the intro at kanaka/wac .

Runs simple WASM code generated by Emscipten or CLANG/LLVM V8.


## Currently limitations:

* Only supports a non-interactive variant of `wac`. No plans to change.
* WASM binary code is included as a static buffer in wac.c 
  Plan is to support network download by integrating the HTTP client component.
* Function import's are unsupported, no dynamic DLL loading, no calls to the OS.
  We might some support in the future.
* Systamatic testing has not been done!


## Build Instructions for ESP32

Get the ESP-ID development kit from [https://docs.espressif.com/projects/esp-idf/en/stable/index.html] and follow the instructions how to download, install, and configure. 

```make menuconfig``` - needs to be run once, adjust the devcie port of your module.

```make all```  - in the root directory, build everything

```make flash monitr```  - flash the built image and start the monitor.  If everything goes fine it prints the return value, tells its done and reboots to start over.


## Build Instructions for Ubuntu

The purpose of the Ubuntu built is to give an easier environment to track down bug,
and to study the code.

Follow the instructions at kanaka/wac to install dependencies (works for me on Ubuntu 18.04.
and does not work on Mac OS).

Create the out directory
```mkdir ./out```

Make out/wac
```make all```

## License

MPL-2.0 (see LICENSE).
